# =============================================================================
# DOCKER DEPLOYMENT .env.docker settings
# =============================================================================
# INSTRUCTIONS:
# 1. Copy this file: cp .env.docker.template .env.docker
# 2. Create symlink (Docker Compose reads .env by default): ln -sf .env.docker .env
# 3. Edit .env.docker with your specific settings
# 4. Setup permissions: ./scripts/setup-docker-volumes.sh
# 5. Run: make docker-dev   (or: docker compose -f docker-compose.yml -f docker-compose.dev.yml up)
#
# For production deployments, see docs/DOCKER-DEPLOYMENT.md
# =============================================================================


# =============================================================================
# HOST DATA PATHS (CRITICAL - REQUIRED!)
# =============================================================================
# Set to ABSOLUTE path on your HOST machine for all persistent data.
# This includes: HPO data, indexes, model caches, results
#
# Examples:
#   Linux/macOS: PHENTRIEVE_HOST_DATA_DIR=/srv/phentrieve/data
#   Windows WSL: PHENTRIEVE_HOST_DATA_DIR=/mnt/c/phentrieve/data
#   Development: PHENTRIEVE_HOST_DATA_DIR=./data (relative to project root)

PHENTRIEVE_HOST_DATA_DIR=./data

# Hugging Face model cache (prevents re-downloads)
# Default: ${PHENTRIEVE_HOST_DATA_DIR}/hf_cache
PHENTRIEVE_HOST_HF_CACHE_DIR=${PHENTRIEVE_HOST_DATA_DIR}/hf_cache


# =============================================================================
# DOCKER NETWORK CONFIGURATION
# =============================================================================
# Name of external network for Nginx Proxy Manager (NPM) integration.
# Check with: docker network ls
# Default is 'npm_default' if NPM installed via docker-compose

NPM_SHARED_NETWORK_NAME=npm_default


# =============================================================================
# API CONFIGURATION
# =============================================================================
# Logging level for API (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL_API=INFO

# CORS: Add production frontend URLs (comma-separated, appends to defaults)
# This allows production deployments without modifying api.yaml
# Example: CORS_EXTRA_ORIGINS=https://phentrieve.example.com,https://app.example.com
CORS_EXTRA_ORIGINS=


# =============================================================================
# PUBLIC URLs (for production deployments)
# =============================================================================
# Used by frontend build to configure API endpoint
# Replace with your actual domain URLs

VITE_API_URL_PUBLIC=http://localhost:8001/api/v1


# =============================================================================
# PORT MAPPINGS (Optional - for direct access without reverse proxy)
# =============================================================================
# Uncomment for local development/debugging if not using NPM

# API_PORT_HOST=8001
# FRONTEND_PORT_HOST=8088


# =============================================================================
# SECURITY: Non-root Container Users
# =============================================================================
# The security-hardened containers run as non-root users:
#   - API: UID 10001 (phentrieve user)
#   - Frontend: UID 101 (nginx user)
#
# IMPORTANT: For existing deployments, fix data directory permissions:
#   sudo chown -R 10001:10001 ${PHENTRIEVE_HOST_DATA_DIR}/indexes
#   sudo chown -R 10001:10001 ${PHENTRIEVE_HOST_DATA_DIR}/hf_cache
# =============================================================================
